<!-- contact.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>早稲田大学総合研究会 | Contact</title>

  <!-- 既存本文フォント + 見出し用Serif -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles/styles.css" />
</head>

<body data-page="contact">
  <header class="site-header">
    <nav class="navbar container">
      <a href="index.html" class="logo">早稲田総合研究会</a>
      <button class="hamburger" aria-label="メニュー開閉"><span></span><span></span><span></span></button>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="activities.html">Activities</a></li>
        <li><a href="members.html">Members</a></li>
        <li><a href="faq.html">FAQ</a></li>
        <li><a href="contact.html" class="active" aria-current="page">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="page contact-page container contact-decor">
    <header class="contact-header">
      <span class="contact-eyebrow">Contact</span>
      <h1 class="contact-title">お問い合わせ</h1>
      <p class="contact-sub">ご質問・ご相談は以下フォームまたは各種SNSからお気軽に。担当より<strong>1–2営業日以内</strong>にご返信します。</p>
    </header>

    <section class="contact-grid" aria-label="お問い合わせと連絡方法">
      <!-- 左：案内 -->
      <aside class="contact-info">
        <h3>他の連絡方法</h3>
        <ul>
          <li>Email：sales.wasera@gmail.com</li>
          <li>LINE：<a href="https://line.me/R/ti/p/@644ocnlx" target="_blank" rel="noopener">公式アカウント</a></li>
          <li>Instagram：</li>
          <li><a href="https://www.instagram.com/ai_sousouken" target="_blank" rel="noopener">@ai_sousouken</a></li>
          <li><a href="https://www.instagram.com/startup_sousouken" target="_blank" rel="noopener">@startup_sousouken</a></li>
          <li><a href="https://www.instagram.com/career_sousouken" target="_blank" rel="noopener">@carrer_sousouken</a></li>
          <li><a href="https://www.instagram.com/media_sousouken" target="_blank" rel="noopener">@media_sousouken</a></li>
        </ul>
        <h3 style="margin-top:18px;">よくある質問</h3>
        <ul>
          <li><a href="faq.html">参加条件・活動日程・費用について</a></li>
        </ul>
      </aside>

      <!-- 右：フォーム -->
      <section class="contact-card" aria-label="お問い合わせフォーム">
        <h3 class="form-title"><span class="dot" aria-hidden="true"></span> フォーム</h3>

        <form class="contact-form" action="https://formspree.io/f/xrblrrww" method="POST" novalidate>
          <div class="form-row">
            <div>
              <label for="name">お名前</label>
              <input type="text" id="name" name="name" autocomplete="name" required />
            </div>
            <div>
              <label for="email">メールアドレス</label>
              <!-- 返信先は _replyto を使用 -->
              <input type="email" id="email" name="_replyto" autocomplete="email" required />
            </div>
          </div>

          <label for="message">メッセージ</label>
          <textarea id="message" name="message" rows="6" required placeholder="ご用件、所属、希望連絡方法などご自由にお書きください。"></textarea>

          <!-- 任意: 件名 / スパム対策（ハニーポット） -->
          <input type="hidden" name="_subject" value="早総研HP: お問い合わせ" />
          <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" aria-hidden="true" />
          <!-- タイムスタンプ（簡易ボット対策） -->
          <input type="hidden" name="ts" id="ts" />

          <div style="display:flex; align-items:center; gap:12px; margin-top:14px;">
            <button type="submit" class="btn btn-primary" id="submitBtn">送信する</button>
            <span class="status" id="form-status" aria-live="polite"></span>
          </div>

          <p class="form-meta">送信いただいた個人情報はお問い合わせ対応の目的にのみ利用します。</p>
        </form>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; 2025 早稲田大学総合研究会</p>
  </footer>

  <!-- Ajax送信（成功時は thanks ページへ遷移） -->
  <script>
    (function () {
      const form = document.querySelector(".contact-form");
      if (!form) return;

      const statusEl = document.getElementById("form-status");
      const submitBtn = document.getElementById("submitBtn");
      const tsEl = document.getElementById("ts");
      if (tsEl) tsEl.value = Date.now();

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (!form.checkValidity()) {
          statusEl.textContent = "未入力の項目があります。ご確認ください。";
          statusEl.className = "status ng";
          return;
        }

        submitBtn.disabled = true;
        statusEl.textContent = "送信中…";
        statusEl.className = "status";

        try {
          const res = await fetch(form.action, {
            method: "POST",
            headers: { "Accept": "application/json" },
            body: new FormData(form),
          });

          if (res.ok) {
            // ★ 成功時はサンクスページへ
            window.location.href = "thanks.html";
            return;
          } else {
            const raw = await res.text();
            let msg = "";
            try {
              const j = JSON.parse(raw);
              msg = j.errors ? j.errors.map(e => e.message).join(" / ") : raw;
            } catch { msg = raw || "送信に失敗しました。時間をおいて再度お試しください。"; }
            statusEl.textContent = msg;
            statusEl.className = "status ng";
          }
        } catch (err) {
          console.error(err);
          statusEl.textContent = "ネットワークエラーが発生しました。";
          statusEl.className = "status ng";
        } finally {
          submitBtn.disabled = false;
          if (tsEl) tsEl.value = Date.now();
        }
      });
    })();
  </script>

  <!-- 既存のナビ開閉など -->
  <script src="js/script.js"></script>
</body>
</html>
