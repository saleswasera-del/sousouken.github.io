<!-- contact.html -->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>早稲田大学総合研究会 | Contact</title>

  <!-- 既存本文フォント + 見出し用Serif -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="styles/styles.css" />

  <!-- このページ専用の軽量スタイル（新規クラスのみ） -->
  <style>:root {
  --contact-primary: #8B1E3F; /* 深めのえんじ */
  --contact-accent: #B42E4B; /* 明るめのえんじ */
  --contact-bg-light: #ffffff;
  --contact-bg-accent: #f7f3f4; /* 白寄りえんじの淡色 */
  --contact-text: #333333;
  --contact-text-light: #666666;
}

body {
  background: linear-gradient(135deg, var(--contact-bg-accent) 0%, var(--contact-bg-light) 60%);
  color: var(--contact-text);
  font-family: "Nunito", system-ui, sans-serif;
}

/* ページ全体 */
.contact-page {
  padding-block: clamp(48px, 6vw, 96px);
}

/* 見出し部分 */
.contact-header {
  text-align: center;
  margin-bottom: clamp(28px, 4vw, 48px);
}

.contact-eyebrow {
  display: inline-block;
  padding: 6px 12px;
  border: 1px solid var(--contact-primary);
  background: var(--contact-primary);
  color: #fff;
  border-radius: 999px;
  font-size: 12px;
  letter-spacing: .08em;
  text-transform: uppercase;
}

.contact-title {
  font-family: "Fraunces", serif;
  font-size: clamp(36px, 6vw, 72px);
  margin: .4em 0 .2em;
  color: var(--contact-primary);
}

.contact-sub {
  color: var(--contact-text-light);
  font-size: clamp(15px, 2.2vw, 18px);
  max-width: 64ch;
  margin: 0 auto;
}

/* レイアウト */
.contact-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(20px, 4vw, 40px);
  align-items: start;
}
@media (max-width: 960px) {
  .contact-grid { grid-template-columns: 1fr; }
}

/* 左側案内 */
.contact-info {
  background: #fff;
  border: 2px solid var(--contact-primary);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}
.contact-info h3 {
  margin: 0 0 10px;
  font-size: 18px;
  color: var(--contact-primary);
}
.contact-info ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.contact-info li {
  margin: 10px 0;
  color: var(--contact-text-light);
}
.contact-info a {
  color: var(--contact-accent);
  text-decoration: underline;
}

/* 右側フォーム */
.contact-card {
  background: #fff;
  border-radius: 16px;
  padding: clamp(18px, 3.4vw, 32px);
  border: 2px solid var(--contact-primary);
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
}
.contact-card label {
  display: block;
  margin: 12px 0 6px;
  color: var(--contact-primary);
  font-weight: 600;
}
.contact-card input,
.contact-card textarea {
  width: 100%;
  background: var(--contact-bg-accent);
  border: 1px solid #ccc;
  border-radius: 8px;
  color: var(--contact-text);
  padding: 10px 12px;
  font-size: 16px;
  transition: border-color .2s ease, background .2s ease;
}
.contact-card input:focus,
.contact-card textarea:focus {
  outline: none;
  border-color: var(--contact-accent);
  background: #fff;
}
.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 720px) {
  .form-row { grid-template-columns: 1fr; }
}

/* ボタン */
.btn, .btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 20px;
  border-radius: 999px;
  border: none;
  font-weight: 700;
  cursor: pointer;
  text-decoration: none;
  transition: transform .18s ease, box-shadow .18s ease;
}
.btn-primary {
  background: var(--contact-primary);
  color: #fff;
  box-shadow: 0 4px 12px rgba(139,30,63,0.3);
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(139,30,63,0.4);
}
.btn-primary:disabled {
  opacity: .6;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* ステータスとメタ */
.status {
  min-height: 22px;
  margin-top: 10px;
  font-size: 14px;
}
.status.ok { color: var(--contact-accent); }
.status.ng { color: #d9534f; }
.form-meta {
  color: var(--contact-text-light);
  font-size: 12px;
  margin-top: 10px;
}

/* フォーム見出し */
.form-title {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0 0 6px;
  font-weight: 800;
  color: var(--contact-primary);
}
.form-title .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--contact-primary);
}

  </style>
</head>

<body>
  <header class="site-header">
    <nav class="navbar container">
      <a href="index.html" class="logo">早総研</a>
      <button class="hamburger" aria-label="メニュー開閉"><span></span><span></span><span></span></button>
      <ul class="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="activities.html">Activities</a></li>
        <li><a href="members.html">Members</a></li>
        <li><a href="faq.html">FAQ</a></li>
        <li><a href="contact.html" class="active">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="page contact-page container contact-decor">
    <header class="contact-header">
      <span class="contact-eyebrow">Get in touch</span>
      <h1 class="contact-title">お問い合わせ</h1>
      <p class="contact-sub">ご質問・ご相談は以下フォームまたは各種SNSからお気軽に。担当より<strong>1–2営業日以内</strong>にご返信します。</p>
    </header>

    <section class="contact-grid" aria-label="お問い合わせと連絡方法">
      <!-- 左：案内 -->
      <aside class="contact-info">
        <h3>他の連絡方法</h3>
        <ul>
          <li>Email：<a href="mailto:info@wasoken.example.com">info@wasoken.example.com</a></li>
          <li>LINE：<a href="https://line.me/R/ti/p/@644ocnlx" target="_blank" rel="noopener">公式アカウント</a></li>
          <li>Instagram：<a href="https://www.instagram.com/ai_sousouken" target="_blank" rel="noopener">@ai_sousouken</a></li>
        </ul>
        <h3 style="margin-top:18px;">よくある質問</h3>
        <ul>
          <li><a href="faq.html">参加条件・活動日程・費用について</a></li>
        </ul>
      </aside>

      <!-- 右：フォーム -->
      <section class="contact-card" aria-label="お問い合わせフォーム">
        <h3 class="form-title"><span class="dot" aria-hidden="true"></span> フォーム</h3>

        <form class="contact-form" action="https://formspree.io/f/xrblrrww" method="POST" novalidate>
          <div class="form-row">
            <div>
              <label for="name">お名前</label>
              <input type="text" id="name" name="name" autocomplete="name" required />
            </div>
            <div>
              <label for="email">メールアドレス</label>
              <!-- 返信先は _replyto を使用 -->
              <input type="email" id="email" name="_replyto" autocomplete="email" required />
            </div>
          </div>

          <label for="message">メッセージ</label>
          <textarea id="message" name="message" rows="6" required placeholder="ご用件、所属、希望連絡方法などご自由にお書きください。"></textarea>

          <!-- 任意: 件名 / スパム対策（ハニーポット） -->
          <input type="hidden" name="_subject" value="早総研HP: お問い合わせ" />
          <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" aria-hidden="true" />
          <!-- タイムスタンプ（簡易ボット対策） -->
          <input type="hidden" name="ts" id="ts" />

          <div style="display:flex; align-items:center; gap:12px; margin-top:14px;">
            <button type="submit" class="btn btn-primary" id="submitBtn">送信する</button>
            <span class="status" id="form-status" aria-live="polite"></span>
          </div>

          <p class="form-meta">送信いただいた個人情報はお問い合わせ対応の目的にのみ利用します。</p>
        </form>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; 2025 早稲田大学総合研究会</p>
  </footer>

  <!-- Ajax送信（成功時は thanks ページへ遷移） -->
  <script>
    (function () {
      const form = document.querySelector(".contact-form");
      if (!form) return;

      const statusEl = document.getElementById("form-status");
      const submitBtn = document.getElementById("submitBtn");
      const tsEl = document.getElementById("ts");
      if (tsEl) tsEl.value = Date.now();

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (!form.checkValidity()) {
          statusEl.textContent = "未入力の項目があります。ご確認ください。";
          statusEl.className = "status ng";
          return;
        }

        submitBtn.disabled = true;
        statusEl.textContent = "送信中…";
        statusEl.className = "status";

        try {
          const res = await fetch(form.action, {
            method: "POST",
            headers: { "Accept": "application/json" },
            body: new FormData(form),
          });

          if (res.ok) {
            // ★ 成功時はサンクスページへ
            window.location.href = "contact-thanks.html";
            return;
          } else {
            const raw = await res.text();
            let msg = "";
            try {
              const j = JSON.parse(raw);
              msg = j.errors ? j.errors.map(e => e.message).join(" / ") : raw;
            } catch { msg = raw || "送信に失敗しました。時間をおいて再度お試しください。"; }
            statusEl.textContent = msg;
            statusEl.className = "status ng";
          }
        } catch (err) {
          console.error(err);
          statusEl.textContent = "ネットワークエラーが発生しました。";
          statusEl.className = "status ng";
        } finally {
          submitBtn.disabled = false;
          if (tsEl) tsEl.value = Date.now();
        }
      });
    })();
  </script>

  <!-- 既存のナビ開閉など -->
  <script src="js/script.js"></script>
</body>
</html>
